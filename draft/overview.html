

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overview &mdash; modflow-obs 0.post106.dev0+ge72d98c documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=61080bff"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="Modflow-obs 0.post106.dev0+ge72d98c" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            modflow-obs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#motivation">Motivation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-this-is-hard">Why this is hard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#what-modflow-obs-does">What Modflow-obs does</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modflow-obs-features">Modflow-obs features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#modflow-obs-in-a-parameter-estimation-workflow">Modflow-obs in a parameter estimation workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#previous-work">Previous work</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="10minutes.html">10 minutes to PEST observations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notebooks/Example.html"> Demo of Modflow-obs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/index.html"> Modules</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release history</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-history.html"> Release History</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to modflow-obs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bibliography</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="references.html">References cited</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html#published-applications-of-modflow-obs">Published applications of Modflow-obs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">modflow-obs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/overview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h1>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Successful decision support modeling requires extracting all available information about a system, including measurements of system state (through history matching with PEST or PEST++, for example).</p></li>
<li><p>To do this, we need to create an objective function of <em>observations</em> that compare <strong>equivalent</strong> measured and simulated quantities.</p></li>
<li><p>For transient models with many field measurements (and many model outputs), we probably also want to aggregate field data and model outputs into summary statistics or indices that capture import system aspects. We may also want to difference observations.</p></li>
<li><p>All of this is easier with a workflow to follow.</p></li>
<li><p>“Forecast first” (White, 2017) and stepwise modeling (Haitjema, 1995) require fast and easy setup of this workflow.</p></li>
</ul>
<section id="why-this-is-hard">
<h3>Why this is hard<a class="headerlink" href="#why-this-is-hard" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Field data and model outputs must be aligned in time and space and upscaled, downscaled or interpolated.</p></li>
<li><p>Custom code is usually required, or several utilities with many input and output files must be chained together in a robust, automated forward model run.</p></li>
<li><p>More observations = more complexity and more potential for mistakes.</p></li>
</ul>
</section>
</section>
<section id="what-modflow-obs-does">
<h2>What Modflow-obs does<a class="headerlink" href="#what-modflow-obs-does" title="Link to this heading"></a></h2>
<p>Modflow-obs is is a collection of Python functions that can be imported into a post-processing script that runs after the process model. Built-in functions support parsing of MODFLOW 6, MODFLOW NWT/2005 and PRMS output, but user-created Python functions can be created to support any processes model; such functions could later be added to Modflow-setup to extend native support.</p>
<p>Modflow-obs attempts to make observation handling and processing for parameter estimation easier by:</p>
<ul class="simple">
<li><p>Providing reusable code that is tested (thereby reducing the amount of user code needed)</p></li>
<li><p>Consolidating observation processing in a single script that processes field measurements and model outputs together, independent of the parameter estimation setup;</p></li>
<li><p>Automating alignment of model outputs and field data in time and space; new observations can be generated automatically when the model grid or time discretization are changed;</p></li>
<li><p>Providing a workflow to follow for adding custom observation processing or model output parsers.</p></li>
<li><p><strong>Hopefully, Modflow-obs can reduce the burden of creating a meaningful objective function, and as a result, promote rapidity, reproducibility and robustness in the overall modeling analysis.</strong></p></li>
</ul>
<section id="modflow-obs-features">
<h3>Modflow-obs features<a class="headerlink" href="#modflow-obs-features" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Automatic observation naming based on real site identifiers, variable types and dates.</p></li>
<li><p>The model output reformatting and observation processing steps are separated, making it easier to support other process models or additional kinds of observation processing</p></li>
<li><p>Automatic temporal aligning of observed and simulated values using real datetimes.</p></li>
<li><p>Automatic vertical alignment of heads using transmissivity-based weighting.</p></li>
<li><p>Automated processing of common types of secondary observations.</p></li>
<li><p>Field observations and simulated values are processed together in a single step within the model forward run. Instruction files for PEST are generated by the same function calls that process the observations, reducing the potential for inconsistencies.</p></li>
</ul>
</section>
</section>
<section id="modflow-obs-in-a-parameter-estimation-workflow">
<h2>Modflow-obs in a parameter estimation workflow<a class="headerlink" href="#modflow-obs-in-a-parameter-estimation-workflow" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>We start with ‘clean’ field data containing site identifiers, locations, and times.</p></li>
<li><p>Model input specifying the locations and site names of observations is then created and the model is run</p></li>
<li><dl class="simple">
<dt>Then in a post-processing script:</dt><dd><ul>
<li><p>Raw model outputs at the specified sites are processed (by Modflow-obs or user-created functions) into a generic dataframe format with real dates and times</p></li>
<li><p>Field data with the specified site names and the processed model output are fed to Modflow-obs to create tables of “base” observations containing equivalent measured and simulated quantities (with the option to include additional un-measured model outputs as forecasts)</p></li>
<li><p>”Base” observations can be further processed into “derivative” observations of summary statistics, indices, differences, etc, using Modflow-setup or user-generated functions</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The postprocessing script can be run in two contexts:</dt><dd><ol class="arabic simple">
<li><p>“PEST setup” context where instruction each function generates both a PEST instruction file and an output file. The instruction files can then be used with <a class="reference external" href="https://github.com/pypest/pyemu">pyEMU</a> to set up the observation data input to PEST.</p></li>
<li><p>“forward run” context where only the output files (that will be read by PEST) are generated.</p></li>
</ol>
</dd>
</dl>
</li>
</ul>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/workflow.png"><img alt="" src="_images/workflow.png" style="width: 700.0px; height: 869.0px;" />
</a>
</figure>
</section>
<section id="previous-work">
<h2>Previous work<a class="headerlink" href="#previous-work" title="Link to this heading"></a></h2>
<p>Modflow-obs is similar to TSPROC (Westenbroek and others, 2012) in that it</p>
<ul class="simple">
<li><p>Emphasizes observation processing to achieve a meaningful objective function</p></li>
<li><p>Processes field data and model outputs in tandem</p></li>
<li><p>Automates instruction file creation using contexts</p></li>
</ul>
<p>Modflow-obs substitutes the input file for TSPROC with a Python script where custom code can be added.</p>
<p>Modflow-obs builds on the Python framework illustrated in the <a class="reference external" href="https://github.com/gmdsi/GMDSI_notebooks">GMDSI examples</a> by adding structure and reusable code.</p>
<p>Like <a class="reference external" href="https://help.pesthomepage.org/observations2.html">MOD2OBS</a>, Modflow-obs automates alignment of field data and model outputs, but does not interpolate horizontally, and uses transmissivity-based weighting for vertical interpolation.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Modflow-obs 0.post106.dev0+ge72d98c" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Apr 24, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>